{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}

<div class="container">
  <h2 class="mb-3 text-center">Choose a Gym Session</h2>

  <table id="calendar-booking" class="calendar-booking">
    <thead>
      <tr>
        <th class="day" data-day="M">Monday</th>
        <th class="day" data-day="T">Tuesday</th>
        <th class="day" data-day="W">Wednesday</th>
        <th class="day" data-day="Th">Thursday</th>
        <th class="day" data-day="F">Friday</th>
        <th class="day" data-day="S">Saturday</th>
        <th class="day" data-day="Su">Sunday</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          {% for session in sessions %}
          {% if session.day == 'Monday' %}
          <div class="session-box">
            <strong>Title:</strong> {{ session.title }}<br />
            <strong>Day:</strong> {{ session.day }}<br />
            <strong>Time:</strong> {{ session.time }}<br />
            <strong>Instructor:</strong> {{ session.instructor_name }}<br />
            <strong>Spots:</strong> {{ session.booked_spots }} / {{ session.available_spots }}<br />
            <form method="POST" action="{% url 'book_session' session.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary">
                Book
              </button>
            </form>
          </div>
          <hr>
          {% endif %}
          {% endfor %}
        </td>
        <td>
          {% for session in sessions %}
          {% if session.day == 'Tuesday' %}
          <div class="session-box">
            <strong>Title:</strong> {{ session.title }}<br />
            <strong>Day:</strong> {{ session.day }}<br />
            <strong>Time:</strong> {{ session.time }}<br />
            <strong>Instructor:</strong> {{ session.instructor_name }}<br />
            <strong>Spots:</strong> {{ session.booked_spots }} / {{ session.available_spots }}<br />
            <form method="POST" action="{% url 'book_session' session.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary">
                Book
              </button>
            </form>
          </div>
          <hr>
          {% endif %}
          {% endfor %}
        </td>
        <td>
          {% for session in sessions %}
          {% if session.day == 'Wednesday' %}
          <div class="session-box">
            <strong>Title:</strong> {{ session.title }}<br />
            <strong>Day:</strong> {{ session.day }}<br />
            <strong>Time:</strong> {{ session.time }}<br />
            <strong>Instructor:</strong> {{ session.instructor_name }}<br />
            <strong>Spots:</strong> {{ session.booked_spots }} / {{ session.available_spots }}<br />
            <form method="POST" action="{% url 'book_session' session.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary">
                Book
              </button>
            </form>
          </div>
          <hr>
          {% endif %}
          {% endfor %}
        </td>
        <td>
          {% for session in sessions %}
          {% if session.day == 'Thursday' %}
          <div class="session-box">
            <strong>Title:</strong> {{ session.title }}<br />
            <strong>Day:</strong> {{ session.day }}<br />
            <strong>Time:</strong> {{ session.time }}<br />
            <strong>Instructor:</strong> {{ session.instructor_name }}<br />
            <strong>Spots:</strong> {{ session.booked_spots }} / {{ session.available_spots }}<br />
            <form method="POST" action="{% url 'book_session' session.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary">
                Book
              </button>
            </form>
          </div>
          <hr>
          {% endif %}
          {% endfor %}
        </td>
        <td>
          {% for session in sessions %}
          {% if session.day == 'Friday' %}
          <div class="session-box">
            <strong>Title:</strong> {{ session.title }}<br />
            <strong>Day:</strong> {{ session.day }}<br />
            <strong>Time:</strong> {{ session.time }}<br />
            <strong>Instructor:</strong> {{ session.instructor_name }}<br />
            <strong>Spots:</strong> {{ session.booked_spots }} / {{ session.available_spots }}<br />
            <form method="POST" action="{% url 'book_session' session.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary">
                Book
              </button>
            </form>
          </div>
          <hr>
          {% endif %}
          {% endfor %}
        </td>
        <td>
          {% for session in sessions %}
          {% if session.day == 'Saturday' %}
          <div class="session-box">
            <strong>Title:</strong> {{ session.title }}<br />
            <strong>Day:</strong> {{ session.day }}<br />
            <strong>Time:</strong> {{ session.time }}<br />
            <strong>Instructor:</strong> {{ session.instructor_name }}<br />
            <strong>Spots:</strong> {{ session.booked_spots }} / {{ session.available_spots }}<br />
            <form method="POST" action="{% url 'book_session' session.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary">
                Book
              </button>
            </form>
          </div>
          <hr>
          {% endif %}
          {% endfor %}
        </td>
        <td>
          {% for session in sessions %}
          {% if session.day == 'Sunday' %}
          <div class="session-box">
            <strong>Title:</strong> {{ session.title }}<br />
            <strong>Day:</strong> {{ session.day }}<br />
            <strong>Time:</strong> {{ session.time }}<br />
            <strong>Instructor:</strong> {{ session.instructor_name }}<br />
            <strong>Spots:</strong> {{ session.booked_spots }} / {{ session.available_spots }}<br />
            <form method="POST" action="{% url 'book_session' session.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary">
                Book
              </button>
            </form>
          </div>
          <hr>
          {% endif %}
          {% endfor %}
        </td>
      </tr>
    </tbody>
  </table>
</div>
{% endblock %}