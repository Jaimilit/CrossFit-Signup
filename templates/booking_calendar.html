{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container">
    <h2 class="mb-3 text-center">Choose a Gym Session hahahahhaha</h2>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form | crispy }}
    </form>

    <table id="calendar-booking" class="calendar-booking">
        <thead>
            <tr>
                <th class="day">Monday</th>
                <th class="day">Tuesday</th>
                <th class="day">Wednesday</th>
                <th class="day">Thursday</th>
                <th class="day">Friday</th>
                <th class="day">Saturday</th>
                <th class="day">Sunday</th>
            </tr>
        </thead>
        <tbody>
            {% for day, sessions in days.items %}
            <tr>
                {% for session in sessions %}
                <td>
                    <h4>{{ day }}</h4>
                    <div class="session-box">
                        <strong>Title:</strong> {{ session.title }}<br>
                        <strong>Time:</strong> {{ session.time }}<br>
                        <strong>Instructor:</strong> {{ session.instructor_name }}<br>
                        <strong>Available Spots:</strong> {{ session.available_spots }} / 10<br>
                        <form method="POST" action="{% url 'book_session' session.id %}">
                            {% csrf_token %}
                            {{ form | crispy }}
                            <button type="submit" class="btn btn-primary">Book Session</button>
                        </form>
                    </div>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}